get:
  operationId: GetQuerySuggestions
  tags:
    - Query
  summary: Retrieve Flux query suggestions
  description: |
    Returns a list of Flux query suggestions.

    Use this endpoint to retrieve a list of Flux query suggestions. The response
    body contains a list of functions containing the function name and its
    parameters.

    This endpoint was built to provide autocomplete for the Flux Query Builder.

    #### Limitations

    - Using `/api/v2/query/suggestions/` (note the trailing slash) with cURL
    will result in a HTTP `301 Moved Permanently` status code. Please use
    `/api/v2/query/suggestions` without a trailing slash.

    - the endpoint exposes helper functions that should not be used
    while building a query such as
    [`_sortLimit()`](https://github.com/influxdata/flux/blob/a768568a4cbeb299433ee31a059e599d290fcfbf/libflux/flux/benches/everything.flux#L2247)

    #### Related Guides

    - [List of all Flux functions]({{% INFLUXDB_DOCS_URL %}}/flux/v0.x/stdlib/all-functions/).
  parameters:
    - $ref: "../parameters/TraceSpan.yml"
  responses:
    "200":
      description: |
        Success.
        The response body contains a list of Flux query suggestions.
      content:
        application/json:
          schema:
            $ref: "../schemas/FluxSuggestions.yml"
          examples:
            $ref: "../schemas/QuerySuggestionsSuccessResponse.yml"
    "301":
      description: |
        Moved Permanently.
        InfluxData has moved the URL of the endpoint.
        Use `/api/v2/query/suggestions`.
      content:
        text/html:
          schema:
            $ref: "../schemas/MovedPermanently.yml"
          examples:
            movedPermanently:
              summary: Invalid URL
              description: |
                The URL has been permanently moved. Use `/api/v2/query/suggestions`.
              value : |
                <a href="/api/v2/query/suggestions?orgID=INFLUX_ORG_ID">Moved Permanently</a>
    default:
      description: Internal server error.
      content:
        application/json:
          schema:
            $ref: "../schemas/Error.yml"
  x-codeSamples:
    - lang: Shell
      label: cURL
      source: |
        curl --request GET 'INFLUX_URL/api/v2/query/suggestions' \
          --header 'Accept: application/json' \
          --header 'Authorization: Token INFLUX_TOKEN'
