get:
  operationId: GetBuckets
  tags:
    - Buckets
  summary: List all buckets
  description: |
    Retrieves a list of [buckets]({{% INFLUXDB_DOCS_URL %}}/cloud/reference/glossary/#bucket).

    To limit which buckets are returned, pass query parameters in your request.
    If no query parameters are passed, InfluxDB returns all buckets up to the 
    default `limit`.
    
    #### Limitations

    - Paging with an `offset` greater than the number of records will result in
    an empty list of buckets--for example:

      The following request is paging to the 50th record, but the user only has
      10 buckets.

      ```sh
      $ curl --request GET "INFLUX_URL/api/v2/scripts?limit=1&offset=50"

      $ {
          "links": {
              "prev": "/api/v2/buckets?descending=false\u0026limit=1\u0026offset=49\u0026orgID=ORG_ID",
              "self": "/api/v2/buckets?descending=false\u0026limit=1\u0026offset=50\u0026orgID=ORG_ID"
          },
          "buckets": []
        }
      ```

    #### Related Guides

    - [Manage buckets]({{% INFLUXDB_DOCS_URL %}}/cloud/organizations/buckets/)
  parameters:
    - $ref: "../parameters/TraceSpan.yml"
    - $ref: "../parameters/Offset.yml"
    - $ref: "../parameters/Limit.yml"
    - $ref: "../parameters/After.yml"
    - in: query
      name: org
      description: |
        Organization name.
        The name of the organization.
      schema:
        type: string
    - in: query
      name: orgID
      description: |
        Organization ID.
        The organization ID.
      schema:
        type: string
    - in: query
      name: name
      description: |
        Bucket name.
        Only returns buckets with a specific name.
      schema:
        type: string
    - in: query
      name: id
      description: |
        Bucket ID.
        Only returns buckets with a specific ID.
      schema:
        type: string
  responses:
    "200":
      description: |
        Success.
        The response body contains a list of buckets and URI links to adjacent
        buckets.
      content:
        application/json:
          schema:
            $ref: "../schemas/Buckets.yml"
          examples:
            $ref: "../schemas/BucketsListResponse.yml"
    "401":
      $ref: "../responses/AuthorizationError.yml"
    "500":
      $ref: "../responses/InternalServerError.yml"
    default:
      description: Unexpected error
      content:
        application/json:
          schema:
            $ref: "../schemas/Error.yml"
  x-codeSamples:
    - lang: Shell
      label: cURL
      source: |
        curl --request GET "https://cloud2.influxdata.com/api/v2/buckets?name=_monitoring" \
          --header "Authorization: Token INFLUX_TOKEN" \
          --header "Accept: application/json" \
          --header "Content-Type: application/json"
post:
  operationId: PostBuckets
  tags:
    - Buckets
  summary: Create a bucket
  description: |
    Creates a [bucket]({{% INFLUXDB_DOCS_URL %}}/cloud/reference/glossary/#bucket)
    and returns the created bucket along with metadata.
    
    #### InfluxDB Cloud
    
    #### InfluxDB OSS
    
    - Does not support `explicit` bucket schemas.
    
    #### Related Guides
    
    - [Create bucket]({{% INFLUXDB_DOCS_URL %}}/cloud/organizations/buckets/create-bucket/)
    - [Create bucket CLI reference]({{% INFLUXDB_DOCS_URL %}}/cloud/reference/cli/influx/bucket/create)
  parameters:
    - $ref: "../parameters/TraceSpan.yml"
  requestBody:
    description: Bucket to create
    required: true
    content:
      application/json:
        schema:
          $ref: "../schemas/PostBucketRequest.yml"
  responses:
    "201":
      description: |
        Success.
        Bucket created.
      content:
        application/json:
          schema:
            $ref: "../schemas/Bucket.yml"
    "401":
      $ref: "../responses/AuthorizationError.yml"
    422:
      description: |
        Unprocessable Entity.
        Request body failed validation.
      content:
        application/json:
          schema:
            $ref: "../schemas/Error.yml"
    "500":
      $ref: "../responses/InternalServerError.yml"
    default:
      description: Unexpected error
      content:
        application/json:
          schema:
            $ref: "../schemas/Error.yml"
