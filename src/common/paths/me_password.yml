put:
  operationId: PutMePassword
  tags:
    - Users
  summary: Update a password
  description: |
    Updates the password for the user signed in with _Basic Auth_ credentials.

    This endpoint represents the third step in a three-step process to let a
    signed-in user update their password:
      1. Pass the user's _Basic authentication_ credentials (`USERNAME:PASSWORD`) to the `POST /api/v2/signin`
         endpoint to create a user session and generate a session cookie.
      2. From the response in the first step, extract the session cookie (`Set-Cookie`) header.
      3. Pass the following in a request to the `PUT /api/v2/me/password` endpoint:
         - The `Set-Cookie` header from the second step
         - The `Authorization Basic` header with the user's _Basic authentication_ credentials
         - `{"password": "NEW_PASSWORD"}` in the request body

    #### InfluxDB Cloud

    InfluxDB Cloud doesn't support changing user passwords through the API.
    Use the InfluxDB Cloud user interface (UI) to update your password.

    #### Related endpoints

    - [Signin](#tag/Signin)
    - [Signout](#tag/Signout)
    - [Users](#tag/Users)

    #### Related guides

    - [InfluxDB Cloud - Change your password](https://docs.influxdata.com/influxdb/cloud/account-management/change-password/).
    - [InfluxDB OSS - Change your password](https://docs.influxdata.com/influxdb/latest/users/change-password/).
  security:
    - BasicAuthentication: []
  parameters:
    - $ref: '../parameters/TraceSpan.yml'
  requestBody:
    description: The new password.
    required: true
    content:
      application/json:
        schema:
          $ref: '../schemas/PasswordResetBody.yml'
  responses:
    '204':
      description: Success. The password is updated.
    '400':
      description: |
        Bad request.

        #### InfluxDB Cloud

        - InfluxDB Cloud doesn't support changing passwords through the API; always responds with this status.

        #### InfluxDB OSS

        - InfluxDB doesn't understand a value passed in the request.
    '401':
      $ref: "../responses/AuthorizationError.yml"
    default:
      description: Unsuccessful authentication
      content:
        application/json:
          schema:
            $ref: '../schemas/Error.yml'
