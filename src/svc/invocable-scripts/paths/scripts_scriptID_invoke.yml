post:
  operationId: PostScriptsIDInvoke
  tags:
    - Data I/O endpoints
    - Invokable Scripts
  summary: Invoke a script
  description: |
    Invokes a script and substitutes `params` keys referenced in the script with
    `params` key-values sent in the request body--for example:

    The following invokable scripts contains the parameter `mybucket`:
    ```json
    "script": "from(bucket: params.mybucket)
                |> range(start: -7d)
                |> limit(n:1)"
    ```
    The request body to invoke this script should contain a JSON object with
    key-value pairs such as:
    ```json
    {
      "params": {
        "mybucket": "air_sensor"
      }
    }
    ```

    #### Related Guides
    -[Invoke custom scripts](https://docs.influxdata.com/influxdb/cloud/api-guide/api-invokable-scripts/)
  parameters:
    - in: path
      name: scriptID
      description: |
        Script ID.
        Only returns scripts with this ID.
      schema:
        type: string
      required: true
  requestBody:
    content:
      application/json:
        schema:
          $ref: '../schemas/ScriptInvocationParams.yml'
  responses:
    '200':
      description: The result of the script execution.
      content:
        application/json:
          schema:
            $ref: '../schemas/ScriptHTTPResponseData.yml'
          example:
            $ref: '../schemas/ScriptInvokeResponse.yml'
    '400':
      description: |
        Bad request.
      headers:
        X-Platform-Error-Code:
          description: |
            The reason for the error.
          schema:
            type: string
            example: "invalid"
      content:
        application/json:
          schema:
            $ref: "../../../common/schemas/Error.yml"
          examples:
            invalidParameters:
              summary: Invalid parameters have been passed into the script.
              value: {
                "code": "invalid",
                "message": "invalid parameters provided"
              }
    '404':
      description: |
        Not found.
      headers:
        X-Platform-Error-Code:
          description: |
            The reason for the error.
          schema:
            type: string
            example: "not found"
      content:
        application/json:
          schema:
            $ref: "../../../common/schemas/Error.yml"
          examples:
            scriptNotFound:
              summary: |
                The requested script was not found.
              value: {
                "code": "not found",
                "message": "script \"09afa3b220fe400\" not found"
              }
            bucketNotFound:
              summary: |
                The requested bucket was not found.
              value: {
                "code": "not found",
                "message": "failed to initialize execute state: could not find bucket \"test-bucket\""
              }
    default:
      description: Unexpected error
      $ref: '../../../common/responses/ServerError.yml'
  x-codeSamples:
    - lang: Shell
      label: cUrl
      source: |
